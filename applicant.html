<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halal Development Institute - Business Owner Application</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-color: #047857; /* Emerald Green */
            --primary-hover: #065f46;
            --bg-color: #f3f4f6;
            --card-bg: #ffffff;
            --text-main: #1f2937;
            --text-muted: #6b7280;
            --border-radius: 12px;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
        }

        .main-header-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            border-left: 5px solid var(--primary-color);
        }

        /* --- Stepper --- */
        .progress-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 2rem;
            position: relative;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        .progress-indicator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: #e5e7eb;
            z-index: 0;
            transform: translateY(-50%);
        }
        .step {
            width: 40px;
            height: 40px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--text-muted);
            position: relative;
            z-index: 1;
            margin: 0 auto;
            transition: all 0.3s ease;
        }
        .step.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
            box-shadow: 0 0 0 4px rgba(4, 120, 87, 0.2);
        }

        /* --- Forms --- */
        .form-section {
            background: var(--card-bg);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            margin: 0 auto;
        }
        .form-section h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #f3f4f6;
            padding-bottom: 1rem;
        }

        .btn-primary { background-color: var(--primary-color); border-color: var(--primary-color); }
        .btn-primary:hover { background-color: var(--primary-hover); border-color: var(--primary-hover); }

        .hidden { display: none !important; }

        /* Document List Styling */
        .doc-item {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            transition: all 0.2s;
        }
        .doc-item:hover {
            border-color: var(--primary-color);
            background-color: #f0fdf4;
        }

        /* Sidebar & Dashboard (Simplified for this view) */
        .dashboard-container { min-height: 100vh; display: flex; flex-direction: column; }
    </style>
</head>
<body class="bg-light min-vh-100">

    <div class="container py-4">
        <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-md-between mb-4 main-header-card">
            <div class="d-flex align-items-center gap-3 mb-3 mb-md-0">
                <div class="rounded-circle bg-white d-flex align-items-center justify-content-center border border-2 border-success text-success fw-bold" style="height:56px;width:56px; font-size: 24px;">H</div>
                <div>
                    <h1 class="h5 fw-bold text-dark mb-1">Halal Development Institute</h1>
                    <p class="text-muted small mb-0">Business Owner Application Portal</p>
                </div>
            </div>
            <div class="d-flex gap-2 align-items-center">
                <span class="d-block fw-semibold text-dark me-3" style="font-size: 0.9rem;">Business Owner</span>
                <button onclick="alert('Logged out')" class="btn btn-outline-danger btn-sm">
                    <i class="fa-solid fa-right-from-bracket me-1"></i> Logout
                </button>
            </div>
        </div>

        <div id="page1" class="page">
            <div class="progress-indicator">
                <div class="step active" data-step="1">1</div>
                <div class="step" data-step="2">2</div>
                <div class="step" data-step="3">3</div>
                <div class="step" data-step="4">4</div>
            </div>

            <div class="form-section">
                <h2><i class="fa-regular fa-building me-2"></i>I. Company Information</h2>
                
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="companyName" placeholder="Name" required>
                    <label>Name of Company *</label>
                </div>
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="companyAddress" placeholder="Address" required>
                    <label>Company Address *</label>
                </div>
                <div class="row g-3 mb-3">
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input type="text" class="form-control" id="permitLicense" placeholder="License" required>
                            <label>Permit/License No. *</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input type="date" class="form-control" id="dateIssued" required>
                            <label>Date Issued *</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input type="date" class="form-control" id="validUntil" required>
                            <label>Valid Until *</label>
                        </div>
                    </div>
                </div>
                <div class="row g-3 mb-4">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input type="tel" class="form-control" id="telephone" placeholder="Tel" required>
                            <label>Telephone *</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input type="email" class="form-control" id="email" placeholder="Email" required>
                            <label>E-mail Address *</label>
                        </div>
                    </div>
                </div>

                <div class="d-flex justify-content-end">
                    <button class="btn btn-primary btn-lg" onclick="showPage('page2')">Next Step <i class="fa-solid fa-arrow-right ms-2"></i></button>
                </div>
            </div>
        </div>

        <div id="page2" class="page hidden">
            <div class="progress-indicator">
                <div class="step" data-step="1">1</div>
                <div class="step active" data-step="2">2</div>
                <div class="step" data-step="3">3</div>
                <div class="step" data-step="4">4</div>
            </div>

            <div class="form-section">
                <h2><i class="fa-solid fa-box-open me-2"></i>II. Items & Manufacturing</h2>
                
                <h5 class="fw-bold text-dark mb-3">A. Items to be Applied</h5>
                <div class="card bg-light border-0 mb-4">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-borderless" id="itemsTable">
                                <thead>
                                    <tr>
                                        <th style="width: 50%">Item Name</th>
                                        <th style="width: 40%">Product Type</th>
                                        <th style="width: 10%">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="itemsListBody">
                                    </tbody>
                            </table>
                        </div>
                        <button class="btn btn-outline-success btn-sm dashed-border w-100 py-2" id="addItemBtn">
                            <i class="fa-solid fa-plus me-1"></i> Add New Item
                        </button>
                    </div>
                </div>

                <h5 class="fw-bold text-dark mb-3 pt-3 border-top">B. Product Manufacturing Details</h5>
                
                <div class="mb-4">
                    <label class="form-label fw-semibold">Is the product locally manufactured or imported? *</label>
                    <div class="d-flex gap-3">
                        <div class="form-check p-0">
                            <input type="radio" class="btn-check" name="manufacturing" id="manu_local" value="local" autocomplete="off">
                            <label class="btn btn-outline-secondary" for="manu_local">Locally Manufactured</label>
                        </div>
                        <div class="form-check p-0">
                            <input type="radio" class="btn-check" name="manufacturing" id="manu_imported" value="imported" autocomplete="off">
                            <label class="btn btn-outline-secondary" for="manu_imported">Imported</label>
                        </div>
                        <div class="form-check p-0">
                            <input type="radio" class="btn-check" name="manufacturing" id="manu_both" value="both" autocomplete="off">
                            <label class="btn btn-outline-secondary" for="manu_both">Both</label>
                        </div>
                    </div>
                </div>

                <div id="localSection" class="manufacturing-section hidden mb-4">
                    <div class="card border-success-subtle">
                        <div class="card-header bg-success-subtle text-success-emphasis fw-bold">
                            <i class="fa-solid fa-industry me-2"></i>Local Manufacturing
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label class="form-label">How many plants does your company have?</label>
                                <input type="number" id="numPlants" class="form-control" min="0" placeholder="Enter number (e.g. 3)">
                            </div>
                            <div id="plantAddressesContainer" class="d-flex flex-column gap-3">
                                </div>
                        </div>
                    </div>
                </div>

                <div id="importedSection" class="manufacturing-section hidden mb-4">
                    <div class="card border-info-subtle">
                        <div class="card-header bg-info-subtle text-info-emphasis fw-bold">
                            <i class="fa-solid fa-globe me-2"></i>Imported Details
                        </div>
                        <div class="card-body">
                            <label class="form-label">Country of Origin</label>
                            <select id="countryOrigin" class="form-select">
                                <option value="">Select country...</option>
                                </select>
                        </div>
                    </div>
                </div>

                <div class="form-actions d-flex justify-content-between mt-4">
                    <button class="btn btn-light border" onclick="showPage('page1')">Back</button>
                    <button class="btn btn-primary" onclick="showPage('page3')">Next Step <i class="fa-solid fa-arrow-right ms-2"></i></button>
                </div>
            </div>
        </div>

        <div id="page3" class="page hidden">
            <div class="progress-indicator">
                <div class="step" data-step="1">1</div>
                <div class="step" data-step="2">2</div>
                <div class="step active" data-step="3">3</div>
                <div class="step" data-step="4">4</div>
            </div>

            <div class="form-section">
                <h2><i class="fa-solid fa-file-pdf me-2"></i>III. Required Documents</h2>
                <div class="alert alert-warning border-warning d-flex align-items-center mb-4" role="alert">
                    <i class="fa-solid fa-triangle-exclamation me-3 fs-4"></i>
                    <div>
                        Please upload all documents in <strong>PDF format</strong> only.
                        <div class="small">Ensure files are clear and readable.</div>
                    </div>
                </div>

                <div id="dynamicDocumentsList" class="d-flex flex-column gap-3">
                    </div>

                <div class="form-actions d-flex justify-content-between mt-5">
                    <button class="btn btn-light border" onclick="showPage('page2')">Back</button>
                    <button class="btn btn-primary" onclick="showPage('page4')">Next Step <i class="fa-solid fa-arrow-right ms-2"></i></button>
                </div>
            </div>
        </div>

        <div id="page4" class="page hidden">
            <div class="progress-indicator">
                <div class="step" data-step="1">1</div>
                <div class="step" data-step="2">2</div>
                <div class="step" data-step="3">3</div>
                <div class="step active" data-step="4">4</div>
            </div>

            <div class="form-section">
                <h2><i class="fa-solid fa-signature me-2"></i>IV. Confirm & Agreement</h2>
                
                <div class="row g-3 mb-3">
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input type="text" class="form-control" id="firstName" required>
                            <label>First Name *</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input type="text" class="form-control" id="middleName">
                            <label>Middle Name</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input type="text" class="form-control" id="lastName" required>
                            <label>Last Name *</label>
                        </div>
                    </div>
                </div>

                <div class="form-floating mb-4">
                    <select id="position" class="form-select" required>
                        <option value="">Select position</option>
                        <option value="Owner">Owner / Proprietor</option>
                        <option value="CEO">Chief Executive Officer (CEO)</option>
                        <option value="General Manager">General Manager</option>
                        <option value="COO">COO</option>
                    </select>
                    <label>Position / Designation *</label>
                </div>

                <div class="card bg-success-subtle border-success mb-4">
                    <div class="card-body">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="certifyCheckbox">
                            <label class="form-check-label fw-bold text-success-emphasis" for="certifyCheckbox">
                                I HEREBY CERTIFY THAT THE ANSWERS AND DOCUMENTS SUBMITTED ARE TRUE AND CORRECT.
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-actions d-flex justify-content-between">
                    <button class="btn btn-light border" onclick="showPage('page3')">Back</button>
                    <button class="btn btn-success btn-lg px-5" id="submitBtn"><i class="fa-solid fa-paper-plane me-2"></i> Submit Application</button>
                </div>
            </div>
        </div>

        <div id="page5" class="modal-backdrop-custom hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1050; display:flex; align-items:center; justify-content:center;">
            <div class="bg-white p-5 rounded-4 text-center shadow-lg" style="max-width: 400px;">
                <div class="display-1 text-success mb-3"><i class="fa-regular fa-circle-check"></i></div>
                <h3 class="fw-bold mb-2">Success!</h3>
                <p class="text-muted mb-4">Your application has been successfully submitted to the halal certifying body for evaluation.</p>
                <button class="btn btn-primary w-100" onclick="location.reload()">Return to Dashboard</button>
            </div>
        </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // --- 1. Navigation Logic ---
        function showPage(pageId) {
            $('.page').addClass('hidden');
            $('#' + pageId).removeClass('hidden');
            window.scrollTo(0,0);
        }

        $(document).ready(function() {
            // Start at page 1 for the form flow
            showPage('page1');

            // Submit Button
            $('#submitBtn').click(function(){
                if($('#certifyCheckbox').is(':checked')) {
                    $('#page5').removeClass('hidden');
                } else {
                    alert('Please certify that the information is correct.');
                }
            });

            // --- 2. Items & Manufacturing Logic ---

            // A. Item Adding Logic
            function addItemRow() {
                const rowId = Date.now();
                const rowHtml = `
                    <tr id="row-${rowId}">
                        <td><input type="text" class="form-control" placeholder="e.g. Chicken Hotdog" required></td>
                        <td>
                            <select class="form-select" required>
                                <option value="" disabled selected>Select...</option>
                                <option value="Food">Food</option>
                                <option value="Non-Food">Non-Food</option>
                            </select>
                        </td>
                        <td class="text-center">
                            <button class="btn btn-outline-danger btn-sm remove-row" data-id="${rowId}">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
                $('#itemsListBody').append(rowHtml);
            }

            $('#addItemBtn').click(addItemRow);
            
            // Initial row
            addItemRow();

            // Event Delegation for remove button
            $('#itemsListBody').on('click', '.remove-row', function() {
                const id = $(this).data('id');
                $(`#row-${id}`).remove();
            });

            // B. Manufacturing Radio Logic
            $('input[name="manufacturing"]').change(function() {
                const val = $(this).val();
                
                // Hide all first
                $('.manufacturing-section').addClass('hidden');
                
                if(val === 'local') {
                    $('#localSection').removeClass('hidden');
                } else if(val === 'imported') {
                    $('#importedSection').removeClass('hidden');
                } else if(val === 'both') {
                    $('#localSection').removeClass('hidden');
                    $('#importedSection').removeClass('hidden');
                }
            });

            // C. Dynamic Plant Address Fields
            $('#numPlants').on('input', function() {
                const count = parseInt($(this).val()) || 0;
                const container = $('#plantAddressesContainer');
                container.empty(); // Clear existing

                if(count > 0) {
                    for(let i = 1; i <= count; i++) {
                        container.append(`
                            <div class="form-floating animate-fade-in">
                                <input type="text" class="form-control" id="plantAddr${i}" placeholder="Addr">
                                <label for="plantAddr${i}">Address for Plant Site #${i}</label>
                            </div>
                        `);
                    }
                }
            });

            // D. Populate Country List (All Countries)
            const countries = [
                "Afghanistan","Albania","Algeria","Andorra","Angola","Antigua & Deps","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Central African Rep","Chad","Chile","China","Colombia","Comoros","Congo","Congo {Democratic Rep}","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland {Republic}","Israel","Italy","Ivory Coast","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea North","Korea South","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar, {Burma}","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russian Federation","Rwanda","St Kitts & Nevis","St Lucia","Saint Vincent & the Grenadines","Samoa","San Marino","Sao Tome & Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Togo","Tonga","Trinidad & Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"
            ];
            
            const $countrySelect = $('#countryOrigin');
            countries.forEach(c => {
                $countrySelect.append(`<option value="${c}">${c}</option>`);
            });

            // --- 3. Documents Logic ---
            const requiredDocs = [
                "Business Permit", 
                "License to Operate (LTO)", 
                "Mayor's Permit", 
                "Barangay Permit", 
                "FDA CPR of Products", 
                "DTI License / SEC Registration", 
                "Sanitary Permit", 
                "Fire Clearance Permit", 
                "Environment Certificate (DENR)", 
                "GMP (Good Manufacturing Practice)", 
                "HACCP", 
                "ISO Certificate (if any)", 
                "Packaging Halal Certificate", 
                "Warehouse Halal Certificate", 
                "Matrix of Raw Materials", 
                "Halal Certificate of Raw Materials", 
                "Previous Halal Certificate (HDIP)"
            ];

            const docContainer = $('#dynamicDocumentsList');
            
            requiredDocs.forEach((doc, index) => {
                const docId = `doc_${index}`;
                const html = `
                    <div class="doc-item p-3 d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3 bg-white">
                        <div class="d-flex align-items-center gap-3">
                            <div class="bg-light rounded p-2 text-danger">
                                <i class="fa-solid fa-file-pdf fs-4"></i>
                            </div>
                            <div>
                                <h6 class="mb-0 fw-semibold text-dark">${doc}</h6>
                                <small class="text-muted">Required â€¢ PDF</small>
                            </div>
                        </div>
                        <div class="w-md-50">
                            <input type="file" class="form-control form-control-sm" id="${docId}" accept=".pdf" required>
                        </div>
                    </div>
                `;
                docContainer.append(html);
            });
        });
    </script>
</body>
</html>